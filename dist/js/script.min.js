"use strict";function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function displayHint(e){document.querySelector(".hint__"+e).style.display="block"}function hideHint(e){document.querySelector(".hint__"+e).style.display="none"}function checkboxChecked(e){let t=document.querySelectorAll(".music__radio");document.querySelector("#checkbox-music").checked?(console.log("–í—ã–±—Ä–∞–Ω"),t.forEach(e=>e.removeAttribute("disabled"))):(t.forEach(e=>{e.disabled=!0}),console.log("–ù–µ –í—ã–±—Ä–∞–Ω"))}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const startBtn=document.querySelector(".game-area__button");startBtn.y=20;const gameArea=document.querySelector(".game-area");let title=document.querySelector(".game__title"),titleWord=title.querySelector(".title__word"),titleWords=title.querySelectorAll(".title__word");const userName=document.querySelector(".input__user-name");let windowHeight=document.documentElement.clientHeight;class Car{constructor(e,t,...r){this.imgSrc=e,this.speed=t,this.classes=[...r]}create(){this.car=document.createElement("div"),gameArea.appendChild(this.car),this.car.classList.add("car"),this.car.style.backgroundImage=this.imgSrc,this.x=this.car.offsetLeft,this.y=this.car.offsetTop,console.log("üöÄ ~ file: _declarations.js ~ line 30 ~ Car ~ create ~ this.car.offsetHeight",this.car.offsetHeight),this.render()}render(){this.car.style.left=this.x+"px",this.car.style.top=this.y+"px"}}let player=new Car("url('../img/player.png')",0,"car");player.move=function(e){keys.ArrowLeft&&this.x>0&&(this.x-=this.speed/2,this.car.style.transform="rotate(-10deg)"),keys.ArrowRight&&this.x<gameArea.offsetWidth-this.car.offsetWidth&&(this.x+=this.speed/2,this.car.style.transform="rotate(10deg)"),keys.ArrowRight||keys.ArrowLeft||(this.car.style.transform="rotate(0deg)"),this.render()};const keys={ArrowUp:!1,ArrowDown:!1,ArrowRight:!1,ArrowLeft:!1},gameSetting={play:!1,score:0,speed:3,boost:2};function getMenuValues(){userName.value||(userName.value="player"),player.name=userName.value.capitalize(),userName.disabled="true"}function createRoadMarks(){for(let e=0;e<6;e++){const t=document.createElement("div");t.classList.add("road-mark"),t.style.height=windowHeight/15+"px",t.y=e*(4*windowHeight/20),t.style.top=t.y+"px",0===e&&(t.style.backgroundColor="green"),gameArea.appendChild(t)}}function createPlayerCar(){gameArea.appendChild(car),car.classList.add("car"),car.style.backgroundImage=`url(${player.imgSrc})`,player.x=car.offsetLeft,player.render()}function timeToStart(){titleWords.forEach(e=>e.innerText=""),title.style.fontSize="6rem",title.classList.remove("hide"),titleWord.innerHTML="3",setTimeout(()=>{titleWord.innerHTML="2"},1e3),setTimeout(()=>{titleWord.innerHTML="1"},2e3)}function prepareToStart(){getMenuValues(),startBtn.style.height=startBtn.offsetHeight+"px",startBtn.innerHTML="",createRoadMarks(),
//! createPlayerCar();
player.create()}function removeStartBtn(){if(startBtn.y>=document.documentElement.clientHeight)return startBtn.remove(),void console.log("StartBtn —É—à–ª–∞...");startBtn.y+=player.speed,startBtn.style.top=startBtn.y+"px",requestAnimationFrame(removeStartBtn)}function stopGame(){gameSetting.play=!1}function initGame(){prepareToStart(),startGame()}function startGame(){gameSetting.play=!1,timeToStart(),setTimeout(()=>{title.classList.add("hide"),gameSetting.play=!0,player.speed=gameSetting.speed,requestAnimationFrame(removeStartBtn),requestAnimationFrame(playGame)},0)}startBtn.addEventListener("click",initGame),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};let boostDelta=0,boostStop=!1;function startRun(e){switch(e.preventDefault(),keys[e.key]=!0,e.keyCode){case 38:if(e.repeat)break;boostStop=!1,requestAnimationFrame((function e(){boostDelta+=.01,player.speed+=.01,console.log(player.speed),boostDelta>=gameSetting.boost||1==boostStop?console.log("–ø—Ä–µ–¥–µ–ª —Å–∫–æ—Ä–æ—Å—Ç–∏"):requestAnimationFrame(e)}));break;case 40:if(e.repeat)break;player.speed-=gameSetting.boost-1}}function stopRun(e){switch(e.preventDefault(),keys[e.key]=!1,e.keyCode){case 38:if(e.repeat)break;boostStop=!0,requestAnimationFrame((function e(){if(boostDelta-=.02,player.speed-=.02,console.log(player.speed),boostDelta<=0)return player.speed=Math.round(player.speed),console.log("–≤–µ—Ä–Ω—É–ª–∏—Å—å"),void console.log(player.speed);requestAnimationFrame(e)}));break;case 40:if(e.repeat)break;player.speed+=gameSetting.boost-1}}
//! –Ω–µ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è !
function moveElement(e){let t=!1;return function(e){if(!t)return e.y+=player.speed,e.style.top=e.y+"px",e.y>=document.documentElement.clientHeight?(e.remove(),t=!0,void console.log("–æ–±—ä–µ–∫—Ç "+e+" –ø–æ–∫–∏–Ω—É–ª –ø—Ä–µ–¥–µ–ª —ç–∫—Ä–∞–Ω–∞")):void 0}}function moveRoad(){document.querySelectorAll(".road-mark").forEach((function(e){e.y+=player.speed,e.style.top=e.y+"px",e.y>=document.documentElement.clientHeight&&(e.y=-(3*windowHeight/20+35))}))}function playGame(){gameSetting.play&&(document.addEventListener("keydown",startRun),document.addEventListener("keyup",stopRun),player.move(),moveRoad(),requestAnimationFrame(playGame))}